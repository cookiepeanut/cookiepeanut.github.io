<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Collection</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="loading auth-required">
    <!-- Authentication Screen -->
    <div class="auth-screen" id="authScreen">
        <div class="auth-card">
            <div class="auth-icon">ğŸ”</div>
            <h1 class="auth-title">Welcome</h1>
            <p class="auth-message">Please sign in to continue</p>
            <button class="auth-btn-main" onclick="signInWithGoogle()">
                <span class="google-icon">G</span>
                <span>Sign in with Google</span>
            </button>
        </div>
    </div>

    <!-- Floating Hearts and Photos Background -->
    <div class="hearts-container" id="heartsContainer"></div>

    <div class="container">
        <!-- Screen 0: Landing Page - Split Screen Design -->
        <div class="screen active" id="screen0">
            <!-- User Info Bar -->
            <div class="user-bar" id="userBar" style="display: none;">
                <span class="user-greeting" id="userGreeting">Hey!</span>
                <button class="sign-out-btn-main" onclick="signOutUser()">Sign Out</button>
            </div>

            <div class="homepage-split">
                <!-- Valentines Section -->
                <div class="split-section valentines-section" onclick="goToValentine()">
                    <div class="split-overlay"></div>
                    <div class="split-content">
                        <div class="split-icon">ğŸ’˜</div>
                        <h2 class="split-title">Valentines</h2>
                        <p class="split-description">A romantic journey through our love story</p>
                        <div class="split-cta">Explore â†’</div>
                    </div>
                </div>

                <!-- Digital Diaries Section -->
                <div class="split-section diaries-section" onclick="goToDiaries()">
                    <div class="split-overlay"></div>
                    <div class="split-content">
                        <div class="split-icon">ğŸ“–</div>
                        <h2 class="split-title">Digital Diaries</h2>
                        <p class="split-description">A timeline of our cherished moments</p>
                        <div class="split-cta">Discover â†’</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Screen 1: Welcome -->
        <div class="screen" id="screen1">
            <div class="card">
                <img src="images/IMG_2876.jpeg" alt="Us" class="welcome-photo">
                <h1>Helloooooo!</h1>
                <p>I made something special just for you...</p>
                <p>Are you ready for a little adventure?</p>
                <button class="btn btn-primary" onclick="nextScreen(2)">I'm Ready! ğŸ’«</button>
            </div>
        </div>

        <!-- Screen 2: Trivia Intro -->
        <div class="screen" id="screen2">
            <div class="card">
                <h2>First, a little quiz! ğŸ“</h2>
                <p>Let's see how well you remember our story together...</p>
                <p style="font-size: 0.9rem; color: #999;">(Don't worry, I know you'll ace it!)</p>
                <button class="btn btn-primary" onclick="startTrivia()">Let's Go! ğŸ¯</button>
            </div>
        </div>

        <!-- Screen 3: Trivia Questions -->
        <div class="screen" id="screen3">
            <div class="card">
                <div class="progress-dots" id="progressDots"></div>
                <div class="score-display" id="scoreDisplay">Score: 0/0</div>
                <h2 id="triviaQuestion">Question</h2>
                <div class="trivia-options" id="triviaOptions"></div>
            </div>
        </div>

        <!-- Screen 4: Trivia Results -->
        <div class="screen" id="screen4">
            <div class="card">
                <div class="emoji-large" id="resultsEmoji">ğŸŒŸ</div>
                <h2 id="resultsTitle">Amazing!</h2>
                <p id="resultsMessage">You know us so well!</p>
                <button class="btn btn-primary" onclick="nextScreen(5)">Continue ğŸ’•</button>
            </div>
        </div>

        <!-- Screen 5: Photo Memory Lane -->
        <div class="screen" id="screen5">
            <div class="card">
                <h2>Our Beautiful Memories ğŸ“¸</h2>
                <p>Let's take a moment to remember all our special times together...</p>
                <div class="photo-slideshow">
                    <img src="images/DSCF3755.JPG" class="slideshow-image active" alt="Memory">
                    <img src="images/IMG_1895.jpeg" class="slideshow-image" alt="Memory">
                    <img src="images/IMG_2870.jpeg" class="slideshow-image" alt="Memory">
                    <img src="images/IMG_2876.jpeg" class="slideshow-image" alt="Memory">
                    <img src="images/IMG_2877.jpeg" class="slideshow-image" alt="Memory">
                    <img src="images/IMG_2885.jpeg" class="slideshow-image" alt="Memory">
                    <img src="images/IMG_4731.jpeg" class="slideshow-image" alt="Memory">
                    <img src="images/IMG_4751.jpeg" class="slideshow-image" alt="Memory">
                </div>
                <div class="slideshow-dots" id="slideshowDots"></div>
                <button class="btn btn-primary" onclick="nextScreen(6)" style="margin-top: 20px;">Continue ğŸ’•</button>
            </div>
        </div>

        <!-- Screen 6: Coloring Activity -->
        <div class="screen" id="screen6">
            <div class="card">
                <h2>Color Our Love! ğŸ¨</h2>
                <p>I know how much you love coloring, so here's a little canvas for you!</p>
                <div class="coloring-section">
                    <div class="color-palette" id="colorPalette"></div>
                    <div class="brush-size">
                        <span>ğŸ–Œï¸</span>
                        <input type="range" id="brushSize" min="5" max="50" value="15">
                        <span id="brushSizeLabel">15px</span>
                    </div>
                    <div class="coloring-canvas-container">
                        <canvas id="coloringCanvas" width="350" height="300"></canvas>
                    </div>
                    <button class="btn btn-secondary" onclick="clearCanvas()" style="margin-right: 10px;">Clear ğŸ—‘ï¸</button>
                    <button class="btn btn-primary" onclick="nextScreen(7)">I'm Done! âœ¨</button>
                </div>
            </div>
        </div>

        <!-- Screen 7: The Big Question -->
        <div class="screen" id="screen7">
            <div class="card">
                <div class="emoji-large">ğŸ’˜</div>
                <h1>Peanut...</h1>
                <p>We've shared so many amazing moments together. From cuddling in my car at Lipscomb Parking Garage to sharing tacos and Reese's...</p>
                <p style="font-size: 1.5rem; font-weight: 600; color: #e74c8c;">Will you be my Valentine?</p>
                <div class="question-buttons" id="questionButtons">
                    <button class="btn btn-yes" onclick="sayYes()">Yes! ğŸ’•</button>
                    <button class="btn btn-no" id="noBtn" onmouseover="runAway()" onclick="runAway()">No</button>
                </div>
                <p id="noMessage" style="font-size: 0.9rem; color: #e74c8c; margin-top: 15px; display: none;"></p>
            </div>
        </div>

        <!-- Screen 8: Yes Response -->
        <div class="screen" id="screen8">
            <div class="card">
                <div class="emoji-large">ğŸ¥°</div>
                <h1>YAAAAY!</h1>
                <p class="final-message">I knew you'd say yes! ğŸ’•</p>
                <div class="photo-grid">
                    <img src="images/IMG_2888.jpeg" alt="Us">
                    <img src="images/IMG_2955.jpeg" alt="Us">
                    <img src="images/IMG_2971.jpeg" alt="Us">
                    <img src="images/IMG_4788.jpeg" alt="Us">
                    <img src="images/IMG_4807.jpeg" alt="Us">
                    <img src="images/IMG_7011.jpeg" alt="Us">
                    <img src="images/IMG_9017.jpeg" alt="Us">
                    <img src="images/IMG_9103.jpeg" alt="Us">
                    <img src="images/IMG_9344.jpeg" alt="Us">
                </div>
                <p>You just made me the happiest person in the world, Peanut!</p>
                <p style="font-size: 2rem; margin-top: 20px;">I love you! â¤ï¸</p>
                <p style="font-size: 0.9rem; color: #999; margin-top: 30px;">You're getting a special delivery from Cookie with some of your favorite stuff! ğŸğŸ’•</p>
                <button class="btn btn-secondary" onclick="nextScreen(0)" style="margin-top: 30px;">Back to Home ğŸ </button>
            </div>
        </div>

        <!-- Screen 9: Memories Section -->
        <div class="screen" id="screen9">
            <div class="card" style="max-width: 800px; width: 100%;">
                <h2>Our Beautiful Memories Together ğŸ’•</h2>
                <p style="margin-bottom: 20px;">Let's keep track of all our special moments!</p>

                <!-- Auth Section -->
                <div class="auth-container" id="authContainer">
                    <button class="auth-btn" onclick="signInWithGoogle()">
                        <span>ğŸ”</span>
                        <span>Sign in with Google to add memories</span>
                    </button>
                </div>

                <!-- User Info (shown when logged in) -->
                <div class="user-info" id="userInfo" style="display: none;">
                    <img src="" alt="Profile" class="user-avatar" id="userAvatar">
                    <span id="userName">User</span>
                    <button class="btn btn-secondary" onclick="signOutUser()" style="padding: 8px 20px; margin: 0;">Sign Out</button>
                </div>

                <!-- Tabs -->
                <div class="tab-container" id="tabContainer" style="display: none;">
                    <button class="tab-btn active" onclick="switchTab('view')">View Memories</button>
                    <button class="tab-btn" onclick="switchTab('add')">Add New Memory</button>
                </div>

                <!-- View Memories Tab -->
                <div class="tab-content active" id="viewTab">
                    <div class="memories-grid" id="memoriesGrid">
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ“­</div>
                            <p>No memories yet! Add your first one.</p>
                        </div>
                    </div>
                </div>

                <!-- Add Memory Tab -->
                <div class="tab-content" id="addTab">
                    <div class="memory-form">
                        <form id="memoryForm" onsubmit="saveMemory(event)">
                            <!-- Dates -->
                            <div class="form-group">
                                <label>Date(s) ğŸ“…</label>
                                <input type="date" id="dateInput" required>
                                <button type="button" class="btn btn-secondary" onclick="addDate()" style="margin-top: 10px; padding: 8px 20px;">Add Date</button>
                                <div class="date-input-container" id="selectedDates"></div>
                            </div>

                            <!-- Location -->
                            <div class="form-group">
                                <label>Location ğŸ“</label>
                                <input type="text" id="locationInput" placeholder="Where did you hang out?" required>
                            </div>

                            <!-- Activities -->
                            <div class="form-group">
                                <label>What did you do? ğŸ‰</label>
                                <div style="display: flex; gap: 10px;">
                                    <input type="text" id="activityInput" placeholder="Add an activity...">
                                    <button type="button" class="btn btn-secondary" onclick="addActivity()" style="padding: 8px 20px; margin: 0;">Add</button>
                                </div>
                                <p class="small-text" style="margin-top: 5px;">Each activity will be color-coded based on who added it!</p>
                                <ul class="activity-list" id="activitiesList"></ul>
                            </div>

                            <!-- Photos -->
                            <div class="form-group">
                                <label>Photos ğŸ“¸</label>
                                <input type="file" id="photoInput" accept="image/*" multiple onchange="previewPhotos(event)">
                                <p class="small-text">Photos will be automatically compressed for storage</p>
                                <div class="photo-preview-container" id="photoPreviewContainer"></div>
                            </div>

                            <button type="submit" class="btn btn-primary" style="width: 100%;">Save Memory ğŸ’•</button>
                        </form>
                    </div>
                </div>

                <button class="btn btn-secondary" onclick="nextScreen(0)" style="margin-top: 20px;">Back to Home ğŸ </button>
            </div>
        </div>
    </div>

    <!-- Image Modal -->
    <div class="modal" id="imageModal" onclick="closeModal()">
        <span class="modal-close">&times;</span>
        <img src="" alt="Full size" id="modalImage">
    </div>

    <!-- Firebase SDK -->
    <script type="module" src="js/firebase-config.js"></script>

    <!-- Main JavaScript Files -->
    <script src="js/valentine.js"></script>
    <script src="js/memories.js"></script>
</body>
</html>
